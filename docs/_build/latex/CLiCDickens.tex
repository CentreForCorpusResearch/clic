% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,english]{sphinxmanual}
\usepackage[utf8]{inputenc}
\DeclareUnicodeCharacter{00A0}{\nobreakspace}
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{babel}
\usepackage{times}
\usepackage[Bjarne]{fncychap}
\usepackage{longtable}
\usepackage{sphinx}
\usepackage{multirow}
\usepackage{eqparbox}


\addto\captionsenglish{\renewcommand{\figurename}{Fig. }}
\addto\captionsenglish{\renewcommand{\tablename}{Table }}
\SetupFloatingEnvironment{literal-block}{name=Listing }



\title{CLiC Dickens Documentation}
\date{August 08, 2016}
\release{1.4}
\author{J. de Joode}
\newcommand{\sphinxlogo}{}
\renewcommand{\releasename}{Release}
\setcounter{tocdepth}{2}
\makeindex

\makeatletter
\def\PYG@reset{\let\PYG@it=\relax \let\PYG@bf=\relax%
    \let\PYG@ul=\relax \let\PYG@tc=\relax%
    \let\PYG@bc=\relax \let\PYG@ff=\relax}
\def\PYG@tok#1{\csname PYG@tok@#1\endcsname}
\def\PYG@toks#1+{\ifx\relax#1\empty\else%
    \PYG@tok{#1}\expandafter\PYG@toks\fi}
\def\PYG@do#1{\PYG@bc{\PYG@tc{\PYG@ul{%
    \PYG@it{\PYG@bf{\PYG@ff{#1}}}}}}}
\def\PYG#1#2{\PYG@reset\PYG@toks#1+\relax+\PYG@do{#2}}

\expandafter\def\csname PYG@tok@gd\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PYG@tok@gu\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PYG@tok@gt\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PYG@tok@gs\endcsname{\let\PYG@bf=\textbf}
\expandafter\def\csname PYG@tok@gr\endcsname{\def\PYG@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PYG@tok@cm\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@vg\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@vi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@mh\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@cs\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}\def\PYG@bc##1{\setlength{\fboxsep}{0pt}\colorbox[rgb]{1.00,0.94,0.94}{\strut ##1}}}
\expandafter\def\csname PYG@tok@ge\endcsname{\let\PYG@it=\textit}
\expandafter\def\csname PYG@tok@vc\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@il\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@go\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.20,0.20,0.20}{##1}}}
\expandafter\def\csname PYG@tok@cp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@gi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PYG@tok@gh\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PYG@tok@ni\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.84,0.33,0.22}{##1}}}
\expandafter\def\csname PYG@tok@nl\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.13,0.44}{##1}}}
\expandafter\def\csname PYG@tok@nn\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\expandafter\def\csname PYG@tok@no\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.38,0.68,0.84}{##1}}}
\expandafter\def\csname PYG@tok@na\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@nb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@nc\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.05,0.52,0.71}{##1}}}
\expandafter\def\csname PYG@tok@nd\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.33,0.33,0.33}{##1}}}
\expandafter\def\csname PYG@tok@ne\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@nf\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.49}{##1}}}
\expandafter\def\csname PYG@tok@si\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.44,0.63,0.82}{##1}}}
\expandafter\def\csname PYG@tok@s2\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@nt\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.02,0.16,0.45}{##1}}}
\expandafter\def\csname PYG@tok@nv\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.38,0.84}{##1}}}
\expandafter\def\csname PYG@tok@s1\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@ch\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@m\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@gp\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\expandafter\def\csname PYG@tok@sh\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@ow\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@sx\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.78,0.36,0.04}{##1}}}
\expandafter\def\csname PYG@tok@bp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@c1\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@o\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PYG@tok@kc\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@c\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@mf\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@err\endcsname{\def\PYG@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PYG@tok@mb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@ss\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.32,0.47,0.09}{##1}}}
\expandafter\def\csname PYG@tok@sr\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.14,0.33,0.53}{##1}}}
\expandafter\def\csname PYG@tok@mo\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@kd\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@mi\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.13,0.50,0.31}{##1}}}
\expandafter\def\csname PYG@tok@kn\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@cpf\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.50,0.56}{##1}}}
\expandafter\def\csname PYG@tok@kr\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@s\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@kp\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@w\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PYG@tok@kt\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.56,0.13,0.00}{##1}}}
\expandafter\def\csname PYG@tok@sc\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@sb\endcsname{\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@k\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.00,0.44,0.13}{##1}}}
\expandafter\def\csname PYG@tok@se\endcsname{\let\PYG@bf=\textbf\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}
\expandafter\def\csname PYG@tok@sd\endcsname{\let\PYG@it=\textit\def\PYG@tc##1{\textcolor[rgb]{0.25,0.44,0.63}{##1}}}

\def\PYGZbs{\char`\\}
\def\PYGZus{\char`\_}
\def\PYGZob{\char`\{}
\def\PYGZcb{\char`\}}
\def\PYGZca{\char`\^}
\def\PYGZam{\char`\&}
\def\PYGZlt{\char`\<}
\def\PYGZgt{\char`\>}
\def\PYGZsh{\char`\#}
\def\PYGZpc{\char`\%}
\def\PYGZdl{\char`\$}
\def\PYGZhy{\char`\-}
\def\PYGZsq{\char`\'}
\def\PYGZdq{\char`\"}
\def\PYGZti{\char`\~}
% for compatibility with earlier versions
\def\PYGZat{@}
\def\PYGZlb{[}
\def\PYGZrb{]}
\makeatother

\renewcommand\PYGZsq{\textquotesingle}

\begin{document}

\maketitle
\tableofcontents
\phantomsection\label{index::doc}


Contents:


\chapter{CLiC for end-users}
\label{endusers::doc}\label{endusers:clic-for-end-users}\label{endusers:welcome-to-clic-dickens-s-documentation}
This section of the documentation is work in progress.


\section{Definitions}
\label{endusers:definitions}
\includegraphics{{definition}.png}


\section{The underlying annotation}
\label{endusers:the-underlying-annotation}

\section{The corpora}
\label{endusers:the-corpora}

\section{How to use ...}
\label{endusers:how-to-use}

\subsection{the concordance}
\label{endusers:the-concordance}

\subsection{clusters}
\label{endusers:clusters}

\subsection{keywords}
\label{endusers:keywords}

\subsection{subsets}
\label{endusers:subsets}

\subsection{patterns}
\label{endusers:patterns}

\subsection{user annotation}
\label{endusers:user-annotation}

\chapter{CLiC for administrators}
\label{admin::doc}\label{admin:clic-for-administrators}
For the deployment of CLiC we rely on Docker. This has several benefits:
it packages all the dependencies of CLiC together in a simple image and it makes
a deployment much faster and platform-independent.


\section{Installing CLiC on your own server}
\label{admin:installing-clic-on-your-own-server}

\subsection{Step 1: Install Docker on a vanilla Ubuntu server}
\label{admin:step-1-install-docker-on-a-vanilla-ubuntu-server}
\begin{Verbatim}[commandchars=\\\{\}]
\PYGZsh{} Install Docker in a way that can easily be upgraded
sudo apt\PYGZhy{}get update

sudo apt\PYGZhy{}key adv \PYGZhy{}\PYGZhy{}keyserver hkp://pgp.mit.edu:80 \PYGZhy{}\PYGZhy{}recv\PYGZhy{}keys
58118e89f3a912897c070adbf76221572c52609d

\PYGZsh{} open the /etc/apt/sources.list.d/docker.list file in your favorite
editor. if the file doesn’t exist, create it. and add:

  \PYGZsh{} this is not a command, but something that needs to be pasted in the
  file opened

  deb https://apt.dockerproject.org/repo ubuntu\PYGZhy{}trusty main

sudo apt\PYGZhy{}get update

\PYGZsh{} verify that apt is pulling from the right repository.

sudo apt\PYGZhy{}cache policy docker\PYGZhy{}engine

sudo apt\PYGZhy{}get install linux\PYGZhy{}image\PYGZhy{}generic\PYGZhy{}lts\PYGZhy{}trusty

\PYGZsh{} you need to reboot, this can cause some issues where the firewall
settings would not be saved, this was solved by loading the firewall
explicitly at the restart

sudo reboot

sudo apt\PYGZhy{}get update

sudo apt\PYGZhy{}get install docker\PYGZhy{}engine

sudo docker run hello\PYGZhy{}world
\end{Verbatim}


\subsection{Step 2: Configure Docker}
\label{admin:step-2-configure-docker}
\begin{Verbatim}[commandchars=\\\{\}]
\PYGZsh{} set UFW’s forwarding policy appropriately.
\PYGZsh{} Open /etc/default/ufw file for editing.
sudo vim /etc/default/ufw

\PYGZsh{} Set the DEFAULT\PYGZbs{}\PYGZus{}FORWARD\PYGZbs{}\PYGZus{}POLICY policy to:
DEFAULT\PYGZbs{}\PYGZus{}FORWARD\PYGZbs{}\PYGZus{}POLICY=\PYGZdq{}ACCEPT\PYGZdq{}

sudo ufw reload

\PYGZsh{}TODO check if this is persistent

\PYGZsh{} Allow incoming connections on the Docker port.
\PYGZdl{} sudo ufw allow 2375/tcp

\PYGZsh{} Configure Docker to start on boot
\PYGZsh{} DOCS SAY \PYGZdl{} sudo systemctl enable docker
\PYGZsh{} but I think:

sudo update\PYGZhy{}rc.d docker defaults
\end{Verbatim}


\subsection{Excursus: Quick Docker command guide}
\label{admin:excursus-quick-docker-command-guide}
You might have to prepend \code{sudo} to the commands below, depending on your
environment.

\begin{Verbatim}[commandchars=\\\{\}]
\PYGZsh{} is docker installed
docker info

\PYGZsh{} activate docker
docker\PYGZhy{}machine start default
eval \PYGZdq{}\PYGZdl{}(docker\PYGZhy{}machine env default)\PYGZdq{}

\PYGZsh{} to find localhost ping
docker\PYGZhy{}machine env default

\PYGZsh{} to build
cd \PYGZti{}/ImagesDocker/clic\PYGZhy{}docker/
docker build \PYGZhy{}t jdejoode/clic:v0 .

\PYGZsh{} list images
docker images

\PYGZsh{} run a docker image
docker run \PYGZhy{}d \PYGZhy{}P \PYGZhy{}i \PYGZhy{}t \PYGZhy{}\PYGZhy{}name apache11 jdejoode/clic:v0 docker ps

\PYGZsh{} find info on container
docker port apache11
docker logs a5a665d32

\PYGZsh{} for live updates a la Flask
docker logs –f a6516a51sd f651

\PYGZsh{} stop all docker containers
docker stop \PYGZdl{}(docker ps \PYGZhy{}a \PYGZhy{}q)

\PYGZsh{} remove them
docker rm \PYGZdl{}(docker ps \PYGZhy{}a \PYGZhy{}\PYGZbs{} **q**\PYGZbs{} )

\PYGZsh{} ssh into container
docker exec \PYGZhy{}i \PYGZhy{}t fbd8112 bash

\PYGZsh{} command on actual deploy is slightly different for caching and
rounting purposes:
\PYGZsh{} \PYGZhy{}v /path/on/host:/path/in/container
docker run \PYGZhy{}p 80:8080 –v /tmp/cache:/tmp/cache …

docker run \PYGZhy{}d \PYGZhy{}P \PYGZhy{}\PYGZhy{}name clic2 \PYGZhy{}v
/bin:/clic\PYGZhy{}project/clic/dbs/dickens/indexes jdejoode/clic:v0

\PYGZsh{} to see what processes run in the container
docker top clic0

\PYGZsh{} remove untagged images
docker rmi \PYGZdl{}(docker images \PYGZbs{}\textbar{} grep \PYGZdq{}\PYGZca{}\PYGZlt{}none\PYGZgt{}\PYGZdq{} \PYGZbs{}\textbar{} awk \PYGZsq{}\PYGZob{}print \PYGZdl{}3\PYGZcb{}\PYGZsq{})

\PYGZsh{} deploy
\PYGZsh{} on macbook
\PYGZsh{} https://docs.docker.com/docker\PYGZhy{}hub/repos/
docker login
docker push jdejoode/clic:latest


\PYGZsh{} You can also bind Docker containers to specific ports using the\PYGZhy{}p flag,
for example:
\PYGZdl{} docker run \PYGZhy{}d \PYGZhy{}p 80:5000 training/webapp python app.py
\end{Verbatim}


\subsection{Step 3: Get CLiC's Docker image}
\label{admin:step-3-get-clic-s-docker-image}
\begin{Verbatim}[commandchars=\\\{\}]
\PYGZsh{} you can upload the Docker image found on the shared drive
{}`mahlbema\PYGZhy{}01{}` in the folder {}`CLiC Live Server Data and Image{}`

Do load the image on the server, run:

docker load \PYGZhy{}i path\PYGZhy{}to\PYGZhy{}uploaded\PYGZhy{}CliCLive.tar

For instance:

sudo docker load \PYGZhy{}i CLiCLive.tar
\end{Verbatim}


\subsection{Step 4: Get the indexes, stores, and code}
\label{admin:step-4-get-the-indexes-stores-and-code}
The indexes can be downloaded from the same shared drive (\emph{mahlbema-01}).
They need to be uploaded to the server as they need to be included in the
Docker container as volumes when initialising the Docker container.

\begin{Verbatim}[commandchars=\\\{\}]
git clone https://github.com/CentreForCorpusResearch/clic
\end{Verbatim}


\subsection{Step 5: Run the Docker container}
\label{admin:step-5-run-the-docker-container}
The \code{path-to} elements in the following snippets need to be replaced with
the actual path to your indexes, stores, configs, and code.

\begin{Verbatim}[commandchars=\\\{\}]
sudo docker run \PYGZhy{}d \PYGZhy{}p 80:8080 \PYGZhy{}p 5000:5000
\PYGZhy{}v /home/clicman/clic:/clic\PYGZhy{}project/clic
\PYGZhy{}v /home/clicman/indexes:/clic\PYGZhy{}project/clic/dbs/dickens/indexes
\PYGZhy{}v /home/clicman/stores:/clic\PYGZhy{}project/clic/dbs/dickens/stores
\PYGZhy{}v /home/clicman/db\PYGZus{}annotation\PYGZus{}2016\PYGZus{}05\PYGZus{}10\PYGZus{}at\PYGZus{}12\PYGZus{}00.tar:/clic\PYGZhy{}project/clic/db\PYGZus{}annotation.tar
\PYGZhy{}v /home/clicman/config.xml:/clic\PYGZhy{}project/clic/dbs/dickens/config.xml
\PYGZhy{}v /home/clicman/textfiles:/clic\PYGZhy{}project/clic/clic/textfiles
\PYGZhy{}\PYGZhy{}name clic jdejoode/clic:latest
\end{Verbatim}

What the above command does:
\begin{itemize}
\item {} 
Run the CLiC Docker container called with the latest tag
as the exact version

\item {} 
The –d is used to run docker as a daemon (to keep it running,
otherwise it only runs a single command)

\item {} 
-p 80:8080 tells the host to forward port 80 to 8080

\item {} 
-v host:docker mounts two different folders (the indexes and the stores)
which are essential to clic. These are not included in the Docker image as
they are volatile and as they are too big.

\end{itemize}

This enables you to update and release new code that does not change the database
as the code and the configs are mounted.

Get the database up and running:

\begin{Verbatim}[commandchars=\\\{\}]
\PYGZsh{} move into the container
docker exec \PYGZhy{}it clic bash

\PYGZsh{} run the following commands
dropdb db\PYGZus{}annotation
dropuser clic\PYGZhy{}dickens
sudo \PYGZhy{}u postgres createuser \PYGZhy{}P \PYGZhy{}d \PYGZhy{}r \PYGZhy{}s clic\PYGZhy{}dickens
createdb \PYGZhy{}O clic\PYGZhy{}dickens db\PYGZus{}annotation \PYGZhy{}\PYGZhy{}password
\PYGZsh{} db\PYGZus{}annotation.tar is the db.tar that was mounted earlier
pg\PYGZus{}restore \PYGZhy{}\PYGZhy{}dbname=db\PYGZus{}annotation \PYGZhy{}\PYGZhy{}verbose /clic\PYGZhy{}project/clic/db\PYGZus{}annotation.tar

\PYGZsh{} update to the latest, more advanced caching framework
pip install \PYGZhy{}\PYGZhy{}upgrade Beaker pandas

\PYGZsh{} restart uwsgi and postgres
supervisorctl restart all
\end{Verbatim}

This should get CLiC up and running on your server/computer. Make sure to check
whether the forms actually work before considering the installation a success.

There are functional tests in clic/tests/functional/main.py. Read that document
for more information.

Before destroying a container, on has to export the postgres database. For instance:

\begin{Verbatim}[commandchars=\\\{\}]
pg\PYGZus{}dump \PYGZhy{}U clic\PYGZhy{}dickens \PYGZhy{}h localhost \PYGZhy{}W \PYGZhy{}F t db\PYGZus{}annotation \PYGZgt{} /clic\PYGZhy{}project/clic/db\PYGZus{}annotation.tar
\end{Verbatim}


\subsection{Enjoy, unless ...}
\label{admin:enjoy-unless}
If the server knows a power outage, Docker will be shut down without proper warning.
This means that the Docker container has to be restarted on rebooting the server.

To do so:

\begin{Verbatim}[commandchars=\\\{\}]
\PYGZsh{} Is the container running?
sudo docker ps

\PYGZsh{} If not: check if the container is still available
sudo docker ps \PYGZhy{}a

\PYGZsh{} You can now restart that image, for instance, clic18 by running
sudo docker start clic18

\PYGZsh{} The power outage could have caused other settings to be forgotten:
\PYGZsh{} IF NEEDED, the following commands can be used to bring them back up

sudo ufw reload
sudo ufw restart
sudo service docker restart

\PYGZsh{} If the issue still is not solved, consider the above documentation on the installation
\PYGZsh{} of Docker on a vanilla server
\end{Verbatim}

To troubleshoot the container:

\begin{Verbatim}[commandchars=\\\{\}]
\PYGZsh{} Is the container running?
sudo docker ps

\PYGZsh{} Are the right processes running on the container?
sudo docker top clic  \PYGZsh{} (where clic is the name of the container)

\PYGZsh{} Did the volumes mount correctly?
Exec into the clic container to check manually whether the volumes are mounted

\PYGZsh{} What do the logs say?
sudo docker logs afcb70

\PYGZsh{} What services are listening on what ports?
sudo netstat –peanut

\PYGZsh{} Do you get \PYGZdq{}ACCEPT: iptables: No chain/target/match by that name\PYGZdq{}
sudo service docker restart

\PYGZsh{} In very rare cases, a container might go down without prior notice. In that case
\PYGZsh{} check whether it is up:
sudo docker ps
\PYGZsh{} if it is not up restart it
sudo docker start clic (where clic is the container name)
\end{Verbatim}


\section{Installing CLiC on your own computer}
\label{admin:installing-clic-on-your-own-computer}
Because of the CLiC is released as a Docker image, you can also install CLiC on
your own computer (Mac, Windows, or Linux) by simply installing Docker and
following the system-specific install instructions in the Docker docs.


\section{Run the tests}
\label{admin:run-the-tests}
To run the tests:

\begin{Verbatim}[commandchars=\\\{\}]
BASE\PYGZus{}URL=\PYGZsq{}http://live/\PYGZsq{} py.test main.py  (in
clic/tests/functional tests/)
\end{Verbatim}


\chapter{CLiC for developers}
\label{apidoc::doc}\label{apidoc:clic-for-developers}

\section{Cheshire3}
\label{apidoc:cheshire3}

\subsection{The data-model}
\label{apidoc:the-data-model}

\section{CLiC Concordance}
\label{apidoc:clic-concordance}\label{apidoc:module-concordance}\index{concordance (module)}
CLiC Concordance based on cheshire3 indexes.
\index{Concordance (class in concordance)}

\begin{fulllineitems}
\phantomsection\label{apidoc:concordance.Concordance}\pysigline{\strong{class }\code{concordance.}\bfcode{Concordance}}
This concordance takes terms, index names, book selections, and search type
as input values and returns json with the search term, ten words to the left and
ten to the right, and location information.

This can be used in an ajax api.
\index{build\_and\_run\_query() (concordance.Concordance method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:concordance.Concordance.build_and_run_query}\pysiglinewithargsret{\bfcode{build\_and\_run\_query}}{\emph{terms}, \emph{idxName}, \emph{Materials}, \emph{selectWords}}{}
Builds a cheshire query and runs it.

Its output is a tuple of which the first element is a resultset and
the second element is number of search terms in the query.

\end{fulllineitems}

\index{create\_concordance() (concordance.Concordance method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:concordance.Concordance.create_concordance}\pysiglinewithargsret{\bfcode{create\_concordance}}{\emph{terms}, \emph{idxName}, \emph{Materials}, \emph{selectWords}}{}
main concordance method
create a list of lists containing each three contexts left - node -right,
and a list within those contexts containing each word.
Add two separate lists containing metadata information:
{[}
{[}left context - word 1, word 2, etc.{]},
{[}node - word 1, word 2, etc{]},
{[}right context - word 1, etc{]},
{[}chapter metadata{]},
{[}book metadata{]}
{]},
etc.

\end{fulllineitems}


\end{fulllineitems}



\section{CLiC Clusters}
\label{apidoc:clic-clusters}\label{apidoc:module-clusters}\index{clusters (module)}
Tool to create wordlists based on the entries in an index.
\index{Clusters (class in clusters)}

\begin{fulllineitems}
\phantomsection\label{apidoc:clusters.Clusters}\pysigline{\strong{class }\code{clusters.}\bfcode{Clusters}}
Class that does all the heavy weighting. It makes the connection with
cheshire3, uses the input parameters (indexname and subcorpus/Materials) to
return a list of words and their total number of occurrences.

For instance,
\begin{quote}

\code{the 98021}

\code{to  78465}

...
\end{quote}
\begin{description}
\item[{or}] \leavevmode
\code{he said  8937}

\code{she said 6732}

...

\end{description}
\index{list\_clusters() (clusters.Clusters method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:clusters.Clusters.list_clusters}\pysiglinewithargsret{\bfcode{list\_clusters}}{\emph{idxName}, \emph{Materials}}{}
Build a list of clusters and their occurrences.

Limit the list to the first 3000 entries.

\end{fulllineitems}


\end{fulllineitems}



\section{CLiC Keywords}
\label{apidoc:module-keywords}\label{apidoc:clic-keywords}\index{keywords (module)}
Module to compute keywords (words that are used significantly more frequently
in one corpus than they are in a reference corpus).

The statistical measure used is
Log Likelihood as explained by Rayson and Garside:

Rayson, P. and Garside, R. (2000). Comparing corpora using frequency profiling. 
In proceedings of the workshop on Comparing Corpora, held in conjunction with the 38th 
annual meeting of the Association for Computational Linguistics (ACL 2000). 
1-8 October 2000, Hong Kong, pp. 1 - 6
Available at: \href{http://ucrel.lancs.ac.uk/people/paul/publications/rg\_acl2000.pdf}{http://ucrel.lancs.ac.uk/people/paul/publications/rg\_acl2000.pdf}


\subsection{Usage as follows:}
\label{apidoc:usage-as-follows}\begin{quote}

analysis = pd.DataFrame({[}(`a', 2500), (`the', 25000){]}, columns=(`Type', `Count'))
reference = pd.DataFrame({[}(`a', 10), (`the', 10){]}, columns=(`Type', `Count'))
\begin{description}
\item[{result = extract\_keywords(analysis, }] \leavevmode
reference, 
tokencount\_analysis=20, 
tokencount\_reference=100, 
round\_values=True, 
limit\_rows=3)

\end{description}

result

keywords\_to\_json(result)
\end{quote}


\subsection{Or using text files as input:}
\label{apidoc:or-using-text-files-as-input}\begin{quote}

from collections import Counter
\begin{description}
\item[{with open(`\textasciitilde{}/data/input/DNov/BH.txt') as inputfile:}] \leavevmode
bh = inputfile.read().split()
bh = Counter(bh)

\item[{with open(`\textasciitilde{}/data/input/DNov/OT.txt') as inputfile:}] \leavevmode
ot = inputfile.read().split()
ot = Counter(ot)

\end{description}

bh\_df  = pd.DataFrame(bh.items(), columns={[}'Type', `Count'{]})
ot\_df  = pd.DataFrame(ot.items(), columns={[}'Type', `Count'{]})
\begin{description}
\item[{extract\_keywords(bh\_df, }] \leavevmode
ot\_df, 
tokencount\_analysis=bh\_df.Count.sum(), 
tokencount\_reference=ot\_df.Count.sum(), 
round\_values=True,)

\end{description}
\end{quote}
\index{extract\_keywords() (in module keywords)}

\begin{fulllineitems}
\phantomsection\label{apidoc:keywords.extract_keywords}\pysiglinewithargsret{\code{keywords.}\bfcode{extract\_keywords}}{\emph{wordlist\_analysis}, \emph{wordlist\_reference}, \emph{tokencount\_analysis}, \emph{tokencount\_reference}, \emph{p\_value=0.0001}, \emph{exclude\_underused=True}, \emph{freq\_cut\_off=5}, \emph{round\_values=True}, \emph{limit\_rows=False}}{}
This is the core method for keyword extraction. It provides a number 
of handles to select sections of the data and/or adapt the input for the
formula.
\begin{description}
\item[{Input = Two dataframes with columns `Type', and `Count' and }] \leavevmode
two total tokencounts

\item[{Output = An aligned dataframe which is sorted on the LL value and maybe filter }] \leavevmode\begin{quote}

using the following handles:
\end{quote}
\begin{itemize}
\item {} \begin{description}
\item[{p\_value: limits the keywords based on their converted p\_value. A p\_value of 0.0001}] \leavevmode
will select keywords that have 0.0001 \emph{or less} as their p\_value. It is a 
cut-off. One can choose one out of four values: 0.0001, 0.001, 0.01, or 0.05.
If any other value is chosen, it is ignored and no filtering on p\_value is done.

\end{description}

\item {} \begin{description}
\item[{exclude\_underused: if True (default) it filters the result by excluding tokens that are }] \leavevmode
statistically underused.

\end{description}

\item {} \begin{description}
\item[{freq\_cut\_off: limits the wordlist\_analysis to words that have the freq\_cut\_off (inclusive) }] \leavevmode
as minimal frequency. 5 is a sane default for Log Likelihood. If one does not 
want frequency-based filtering, set a value of 0.

\end{description}

\item {} \begin{description}
\item[{round\_values: if True (default) it rounds the columns with expected frequencies and LL }] \leavevmode
to 2 decimals.

\end{description}

\item {} \begin{description}
\item[{limit\_rows: if a number (for instance, 100), it limits the result to the number of rows }] \leavevmode
specified. If false, rows are not limited.

\end{description}

\end{itemize}

\item[{The defaults are reasonably sane: }] \leavevmode\begin{itemize}
\item {} 
a token needs to occur at least 5 times in the corpus of analysis

\item {} 
a high p-value is set

\item {} 
no filtering of the rows takes place

\item {} 
the underused tokens are excluded

\item {} 
rounding is active

\end{itemize}

\end{description}

For more information on the algorithm, cf. log\_likelihood().

The first column contains the indeces for the original merged dataframe. It does not display
a rank and it should be ignored for keyword analysis (to be more precise: it displays the 
frequency rank of the token in the corpus of analysis).

\end{fulllineitems}

\index{format\_wordlist() (in module keywords)}

\begin{fulllineitems}
\phantomsection\label{apidoc:keywords.format_wordlist}\pysiglinewithargsret{\code{keywords.}\bfcode{format\_wordlist}}{\emph{types}, \emph{counts}, \emph{total=None}}{}
Helper function to convert lists with information into a dataframe.

\end{fulllineitems}

\index{keywords\_to\_json() (in module keywords)}

\begin{fulllineitems}
\phantomsection\label{apidoc:keywords.keywords_to_json}\pysiglinewithargsret{\code{keywords.}\bfcode{keywords\_to\_json}}{\emph{keywords}}{}
Transforms a keywords table into a json array. 
It is specifically tailored at the CLiC Dickens interface.

\end{fulllineitems}

\index{log\_likelihood() (in module keywords)}

\begin{fulllineitems}
\phantomsection\label{apidoc:keywords.log_likelihood}\pysiglinewithargsret{\code{keywords.}\bfcode{log\_likelihood}}{\emph{counts}}{}
This function uses vector calculations to compute LL values.

Input: dataframe that is formatted as follows:
\begin{quote}

Type, 
Count\_analysis, 
Total\_analysis, 
Count\_ref, 
Total\_ref
\end{quote}

Output: dataframe that is formatted as follows:
\begin{quote}

Type, 
Count\_analysis, 
Total\_analysis, 
Count\_ref, 
Total\_ref, 
Expected\_count\_analysis,
Expected\_count\_ref
LL
\end{quote}

Hapax legomena in the Count\_analysis are not deleted.
It is expected that Count\_analysis and Expected\_count\_analysis are not zero.

\end{fulllineitems}



\section{CLiC Chapter Repository}
\label{apidoc:clic-chapter-repository}\label{apidoc:module-chapter_repository}\index{chapter\_repository (module)}
Display the texts available in the cheshire3 database. Also highlight specific
items that were previously retrieved with a concordance.
\index{ChapterRepository (class in chapter\_repository)}

\begin{fulllineitems}
\phantomsection\label{apidoc:chapter_repository.ChapterRepository}\pysigline{\strong{class }\code{chapter\_repository.}\bfcode{ChapterRepository}}
Responsible for providing access to chapter resources within Cheshire.
\index{get\_book\_title() (chapter\_repository.ChapterRepository method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:chapter_repository.ChapterRepository.get_book_title}\pysiglinewithargsret{\bfcode{get\_book\_title}}{\emph{book}}{}
Gets the title of a book from the json file booklist.json

book -- string - the book id/accronym e.g. BH

\end{fulllineitems}

\index{get\_chapter() (chapter\_repository.ChapterRepository method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:chapter_repository.ChapterRepository.get_chapter}\pysiglinewithargsret{\bfcode{get\_chapter}}{\emph{chapter\_number}, \emph{book}}{}
Returns transformed XML for given chapter \& book

chapter\_number -- integer
book -- string - the book id/accronym e.g. BH

\end{fulllineitems}

\index{get\_chapter\_with\_highlighted\_search\_term() (chapter\_repository.ChapterRepository method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:chapter_repository.ChapterRepository.get_chapter_with_highlighted_search_term}\pysiglinewithargsret{\bfcode{get\_chapter\_with\_highlighted\_search\_term}}{\emph{chapter\_number}, \emph{book}, \emph{wid}, \emph{search\_term}}{}
Returns transformed XML for given chapter \& book with the search
highlighted.

We create the transformer directly so that we can pass extra parameters
to it at runtime. In this case the search term.

chapter\_number -- integer
book -- string - the book id/accronym e.g. BH
wid -- integer - word index
search\_term -- string - term to highlight

\end{fulllineitems}

\index{get\_raw\_chapter() (chapter\_repository.ChapterRepository method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:chapter_repository.ChapterRepository.get_raw_chapter}\pysiglinewithargsret{\bfcode{get\_raw\_chapter}}{\emph{chapter\_number}, \emph{book}}{}
Returns raw chapter XML for given chapter \& book

chapter\_number -- integer
book -- string - the book id/accronym e.g. BH

\end{fulllineitems}


\end{fulllineitems}



\section{CLiC KWICgrouper}
\label{apidoc:clic-kwicgrouper}\label{apidoc:module-kwicgrouper}\index{kwicgrouper (module)}
A module to look for patterns in concordances.
\index{Concordance (class in kwicgrouper)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.Concordance}\pysiglinewithargsret{\strong{class }\code{kwicgrouper.}\bfcode{Concordance}}{\emph{term}, \emph{text}, \emph{word\_boundaries=True}, \emph{length=50}, \emph{keep\_punctuation=True}, \emph{keep\_line\_breaks=False}}{}~\begin{quote}

This is a simple concordance for a text file. The input text
should a string that is cleaned, for instance:
\begin{quote}

text.replace(``
\end{quote}
\end{quote}

'', '' '').replace(''  '', '' '')
\begin{quote}

This function has two argument: the search term and the
text to be searched.

The length should be an integer
\end{quote}
\index{from\_multiple\_line\_file() (kwicgrouper.Concordance class method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.Concordance.from_multiple_line_file}\pysiglinewithargsret{\strong{classmethod }\bfcode{from\_multiple\_line\_file}}{\emph{term}, \emph{input\_li}}{}
Construct a concordance that respect line breaks (rather than one
that treats the text as one large string)

TODO

\end{fulllineitems}

\index{list\_concordance() (kwicgrouper.Concordance method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.Concordance.list_concordance}\pysiglinewithargsret{\bfcode{list\_concordance}}{}{}
List the actual concordance.

\end{fulllineitems}

\index{print\_concordance() (kwicgrouper.Concordance method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.Concordance.print_concordance}\pysiglinewithargsret{\bfcode{print\_concordance}}{}{}
Print the lines of a concordance. For debugging purposes.

\end{fulllineitems}

\index{single\_line\_conc() (kwicgrouper.Concordance method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.Concordance.single_line_conc}\pysiglinewithargsret{\bfcode{single\_line\_conc}}{}{}
Build a basic concordance based on a single string of text.

\end{fulllineitems}


\end{fulllineitems}

\index{KWICgrouper (class in kwicgrouper)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.KWICgrouper}\pysiglinewithargsret{\strong{class }\code{kwicgrouper.}\bfcode{KWICgrouper}}{\emph{concordance}}{}
This starts from a concordance and transforms it into a pandas dataframe
(here called textframe) that has five words to the left and right of the
search term in separate columns. These columns can then be searched for
and sorted.

Input:
A nested list of lists looking like:
\begin{quote}
\begin{description}
\item[{{[}}] \leavevmode
{[}'sessed of that very useful appendage  a `,
`voice',
`  for a much longer space of time than t'
{]},

\end{description}

...
\end{quote}

Each pattern needs \emph{its own} instantiation of the KWICgrouper object
because the self.textframe variable is changed in the filter method.
\index{args\_to\_dict() (kwicgrouper.KWICgrouper method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.KWICgrouper.args_to_dict}\pysiglinewithargsret{\bfcode{args\_to\_dict}}{\emph{L5=None}, \emph{L4=None}, \emph{L3=None}, \emph{L2=None}, \emph{L1=None}, \emph{R1=None}, \emph{R2=None}, \emph{R3=None}, \emph{R4=None}, \emph{R5=None}}{}
Helper function to use
L1=''a'' type of functions

\end{fulllineitems}

\index{conc\_to\_df() (kwicgrouper.KWICgrouper method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.KWICgrouper.conc_to_df}\pysiglinewithargsret{\bfcode{conc\_to\_df}}{}{}
Turns a list of dictionaries with L1-R5 values into a dataframe
which can be used as a kwicgrouper.

\end{fulllineitems}

\index{filter\_textframe() (kwicgrouper.KWICgrouper method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.KWICgrouper.filter_textframe}\pysiglinewithargsret{\bfcode{filter\_textframe}}{\emph{kwdict}}{}
Construct a dataframe slice and selector on the fly.
This is no longer meta-programming as it does not use the eval
function anymore.

This returns None if there is no textframe

\end{fulllineitems}

\index{split\_nodes() (kwicgrouper.KWICgrouper method)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.KWICgrouper.split_nodes}\pysiglinewithargsret{\bfcode{split\_nodes}}{}{}
Splits the words into nodes that can be fed into a dataframe.

\end{fulllineitems}


\end{fulllineitems}

\index{clean\_punkt() (in module kwicgrouper)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.clean_punkt}\pysiglinewithargsret{\code{kwicgrouper.}\bfcode{clean\_punkt}}{\emph{text}}{}
Delete punktuation from a text.

Problem: turns CAN'T into CA NT

\end{fulllineitems}

\index{clean\_text() (in module kwicgrouper)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.clean_text}\pysiglinewithargsret{\code{kwicgrouper.}\bfcode{clean\_text}}{\emph{text}}{}~\begin{description}
\item[{Clean a text so that it can be used in a concordance. This includes:}] \leavevmode\begin{itemize}
\item {} 
all text to lowercase

\item {} 
deleting line-breaks

\item {} 
tokenizing and detokenizing

\end{itemize}

\end{description}

\end{fulllineitems}

\index{concordance\_for\_line\_by\_line\_file() (in module kwicgrouper)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.concordance_for_line_by_line_file}\pysiglinewithargsret{\code{kwicgrouper.}\bfcode{concordance\_for\_line\_by\_line\_file}}{\emph{input\_file}, \emph{term}}{}
Takes a file that has different line breaks that cannot be ignored
(for instance a file with a list of things) and makes it into a concordance

\end{fulllineitems}

\index{old\_clean\_punkt() (in module kwicgrouper)}

\begin{fulllineitems}
\phantomsection\label{apidoc:kwicgrouper.old_clean_punkt}\pysiglinewithargsret{\code{kwicgrouper.}\bfcode{old\_clean\_punkt}}{\emph{text}}{}
This ignores apostrophes and punctuation marks attached to the word
* an alternative way would be to replace-delete the punctuation from the text

\end{fulllineitems}



\section{CLiC Normalizer}
\label{apidoc:module-normalizer}\label{apidoc:clic-normalizer}\index{normalizer (module)}
Defines normalizers that can be used in the cheshire3 indexing workflow.


\section{CLiC Query Builder}
\label{apidoc:module-querybuilder}\label{apidoc:clic-query-builder}\index{querybuilder (module)}
Future module to handle the construction of cheshire3 CQL queries.


\section{CLiC Web app}
\label{apidoc:clic-web-app}

\subsection{Index}
\label{apidoc:index}\label{apidoc:module-web.index}\index{web.index (module)}
This is the most important file for the web app. It contains the various
routes that end users can use.

For instance

@app.route(`/about/', methods={[}'GET'{]})
def about():
\begin{quote}

return render\_template(``info/about.html'')
\end{quote}

Where /about/ is the link.


\subsection{API}
\label{apidoc:api}\label{apidoc:module-web.api}\index{web.api (module)}
This file is an extension of index.py. It generates the raw json API that
the keywords, cluster, and concordances use(d).

It needs to be refactored.


\subsection{Models}
\label{apidoc:models}\label{apidoc:module-web.models}\index{web.models (module)}
models.py defines the SQL tables that CLiC uses. These classes
provide a python interface to the SQL database so that you can write python
code that automatically queries the database.

This is heavily dependent on Flask-SQLAlchmey and SQLAlchemy


\section{How to run the local development server?::}
\label{apidoc:how-to-run-the-local-development-server}\begin{quote}

\textasciitilde{}/projects/clic/clic/clic/web\$ PYTHONPATH=\textasciitilde{}/projects/clic/clic python manage.py runserver
\end{quote}


\section{How to run new indexes?::}
\label{apidoc:how-to-run-new-indexes}\begin{quote}

\textasciitilde{}/projects/clic/clic/dbs/dickens/indexes\$ CLIC\_SETTINGS=local PYTHONPATH=\textasciitilde{}/projects/clic/clic python run.py --ntc
\textasciitilde{}/projects/clic/clic/dbs/dickens/indexes\$ CLIC\_SETTINGS=local PYTHONPATH=\textasciitilde{}/projects/clic/clic python run.py --dickens
\end{quote}


\chapter{Reporting issues}
\label{index:reporting-issues}

\chapter{Indices and tables}
\label{index:indices-and-tables}\begin{itemize}
\item {} 
\DUspan{xref,std,std-ref}{genindex}

\item {} 
\DUspan{xref,std,std-ref}{modindex}

\item {} 
\DUspan{xref,std,std-ref}{search}

\end{itemize}


\renewcommand{\indexname}{Python Module Index}
\begin{theindex}
\def\bigletter#1{{\Large\sffamily#1}\nopagebreak\vspace{1mm}}
\bigletter{c}
\item {\texttt{chapter\_repository}}, \pageref{apidoc:module-chapter_repository}
\item {\texttt{clusters}}, \pageref{apidoc:module-clusters}
\item {\texttt{concordance}}, \pageref{apidoc:module-concordance}
\indexspace
\bigletter{k}
\item {\texttt{keywords}}, \pageref{apidoc:module-keywords}
\item {\texttt{kwicgrouper}}, \pageref{apidoc:module-kwicgrouper}
\indexspace
\bigletter{n}
\item {\texttt{normalizer}}, \pageref{apidoc:module-normalizer}
\indexspace
\bigletter{q}
\item {\texttt{querybuilder}}, \pageref{apidoc:module-querybuilder}
\indexspace
\bigletter{w}
\item {\texttt{web.api}}, \pageref{apidoc:module-web.api}
\item {\texttt{web.index}}, \pageref{apidoc:module-web.index}
\item {\texttt{web.models}}, \pageref{apidoc:module-web.models}
\end{theindex}

\renewcommand{\indexname}{Index}
\printindex
\end{document}
